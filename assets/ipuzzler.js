!function(){function t(n){if(i[n])return i[n].exports;var l=i[n]={exports:{}};return e[n](l,l.exports,t),l.exports}var e={228:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}},858:function(t){t.exports=function(t){if(Array.isArray(t))return t}},506:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},575:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},100:function(t,e,i){function n(e,i,s){return c()?t.exports=n=Reflect.construct:t.exports=n=function(t,e,i){var n=[null];n.push.apply(n,e);var c=new(Function.bind.apply(t,n));return i&&l(c,i.prototype),c},n.apply(null,arguments)}var l=i(489),c=i(67);t.exports=n},913:function(t){function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}},754:function(t){function e(i){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(i)}t.exports=e},205:function(t,e,i){var n=i(489);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},430:function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},67:function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},884:function(t){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){l=!0,c=t}finally{try{n||null==u.return||u.return()}finally{if(l)throw c}}return i}}},521:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},585:function(t,e,i){var n=i(8),l=i(506);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?l(t):e}},489:function(t){function e(i,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(i,n)}t.exports=e},38:function(t,e,i){var n=i(858),l=i(884),c=i(379),s=i(521);t.exports=function(t,e){return n(t)||l(t,e)||c(t,e)||s()}},8:function(t){function e(i){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(i)}t.exports=e},379:function(t,e,i){var n=i(228);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}},957:function(t,e,i){function n(e){var i="function"==typeof Map?new Map:void 0;return t.exports=n=function(t){function e(){return u(t,arguments,l(this).constructor)}if(null===t||!s(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,e)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,t)},n(e)}var l=i(754),c=i(489),s=i(430),u=i(100);t.exports=n}},i={};t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,{a:i}),i},t.d=function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",function(){"use strict";var e=t(575),i=t.n(e),n=t(913),l=t.n(n),c=t(506),s=t.n(c),u=t(205),o=t.n(u),r=t(585),g=t.n(r),C=t(754),a=t.n(C),I=t(957),A=t.n(I),d=function(){function t(e,n,l,c,s){var u=this;i()(this,t),this.uri=l||"",this.cells=e,this.allCells.forEach((function(t){return t.puzzle=u})),this.clues=n,this.focusedCell=null,this.direction="across",this.acrossHeading="Across",this.downHeading="Down",this.hasSolution=c,this.submitUrl=s}return l()(t,[{key:"isClueBirectional",value:function(t){return this.clues.across[t]&&this.clues.down[t]}},{key:"switchDirection",value:function(){return"across"==this.direction?this.direction="down":this.direction="across"}},{key:"getState",value:function(){return this.cells.map((function(t){return t.map((function(t){return t.value||"_"})).join("")})).join("")}},{key:"setState",value:function(t){var e=t.split(""),i=this.cells.flat();e.forEach((function(t,e){return i[e].setValue("_"!=t?t:"")}))}},{key:"setFocus",value:function(t,e,i){this.setFocusToCell(this.cells[t][e],i)}},{key:"focusClue",value:function(t,e){var i=this.clues[e][t];this.setFocusToClue(i)}},{key:"setCellValue",value:function(t){this.focusedCell&&(this.focusedCell.setValue(t),t&&this.advanceFocus(this.direction))}},{key:"setFocusToClue",value:function(t){this.direction=t.direction,this.setFocusToCell(t.cells[0])}},{key:"setFocusToCell",value:function(t,e){t&&t.hasInput&&(this.focusedCell==t?t.isBirectional&&e&&this.switchDirection():(this.focusedCell=t,t.clues[this.direction]||this.switchDirection()),this.focusedCell=t,this.focusedClue=t.clues[this.direction],this.cells.flat().forEach((function(t){return t.clearHighlight()})),this.allClues.forEach((function(t){return t.clearHighlight()})),this.focusedClue.addHighlight())}},{key:"getCell",value:function(t){return t.isInside(this.cells)?this.cells[t.row][t.col]:null}},{key:"advanceFocus",value:function(t){var e=this.focusedCell.clues[t],i=e.cells.indexOf(this.focusedCell)+1;i<e.cells.length?this.setFocusToCell(e.cells[i]):e.next&&this.setFocusToClue(e.next)}},{key:"retreatFocus",value:function(t){var e=this.focusedCell.clues[t];if(e){var i=e.cells.indexOf(this.focusedCell)-1;i>=0&&this.setFocusToCell(e.cells[i])}}},{key:"home",value:function(){this.setFocusToCell(this.focusedClue.cells[0])}},{key:"end",value:function(){this.setFocusToCell(this.focusedClue.cells[this.focusedClue.cells.length-1])}},{key:"backspace",value:function(){this.setCellValue(""),this.retreatFocus(this.direction)}},{key:"clearFocus",value:function(){this.focusedCell=null,this.focusedClue=null,this.cells.flat().forEach((function(t){return t.clearHighlight()})),this.allClues.forEach((function(t){return t.clearHighlight()}))}},{key:"moveFocus",value:function(t){var e,i=null===(e=this.focusedCell)||void 0===e?void 0:e.position;if(i){var n=this.getCell(i.increment(t));this.setFocusToCell(n)}}},{key:"checkClue",value:function(){this.focusedClue&&this.focusedClue.check()}},{key:"clearClue",value:function(){this.focusedClue&&this.focusedClue.clear()}},{key:"cheatClue",value:function(){this.focusedClue&&this.focusedClue.cheat()}},{key:"checkGrid",value:function(){this.allCells.forEach((function(t){return t.check()}))}},{key:"clearGrid",value:function(){this.allCells.forEach((function(t){return t.clear()}))}},{key:"cheatGrid",value:function(){this.allCells.forEach((function(t){return t.cheat()}))}},{key:"submitGrid",value:function(t){var e=this,i=decodeURIComponent(document.cookie).split(/; */).map((function(t){return t.split("=")})).find((function(t){return t[0]==e.cookieName}));i&&i.length>1&&(this.allCells.some((function(t){return""===t.style&&""===t.value}))?alert("You are missing some answers"):(t.elements.answers.value=i[1],t.submit()))}},{key:"allClues",get:function(){return this.clues.across.concat(this.clues.down).filter((function(t){return t}))}},{key:"allCells",get:function(){return this.cells.flat()}},{key:"width",get:function(){return this.cells[0].length}},{key:"height",get:function(){return this.cells.length}},{key:"cookieName",get:function(){return this.uri.replace(/[^a-z0-9]+/gi,"-")}}]),t}(),h=function(){function t(e,n){var l=this;if(i()(this,t),this.direction=n,this.number=parseInt(e.number),this.text=e.clue,this.enumeration=e.enumeration,this.label=(e.label||String(this.number)).replace(/\//g,",").toLowerCase(),this.cells=[],this.continuations=[],e.continued&&e.continued.map){this.continuations=e.continued.map((function(i){var n=new t(i,i.direction.toLowerCase());return n.text="See ".concat(e.number),n.direction!=l.direction&&(n.text+=" "+l.direction),n.root=l,n})),this.next=this.continuations[0];for(var c=0;c<this.continuations.length-1;c++)this.continuations[c].next=this.continuations[c+1]}}return l()(t,[{key:"addHighlight",value:function(){this.allClues.forEach((function(t){return t.isActive=!0})),this.allCells.forEach((function(t){return t.addHighlight()}))}},{key:"clearHighlight",value:function(){this.allClues.forEach((function(t){return t.isActive=!1}))}},{key:"toClueList",value:function(){return[this].concat(this.continuations)}},{key:"check",value:function(){this.allCells.forEach((function(t){return t.check()}))}},{key:"clear",value:function(){this.allCells.forEach((function(t){return t.clear()}))}},{key:"cheat",value:function(){this.allCells.forEach((function(t){return t.cheat()}))}},{key:"elementId",get:function(){return"clue-".concat(this.number,"-").concat(this.direction)}},{key:"allCells",get:function(){var t,e=null!==(t=this.root)&&void 0!==t?t:this;return e.cells.concat(e.continuations.map((function(t){return t.cells})).flat())}},{key:"allClues",get:function(){var t,e=null!==(t=this.root)&&void 0!==t?t:this;return[e].concat(e.continuations)}}]),t}(),p=function(){function t(e,n){i()(this,t),this.row=e,this.col=n}return l()(t,[{key:"isInside",value:function(t){return!(this.row<0||this.row>=t.length||this.col<0||this.col>=t[this.row].length)}},{key:"increment",value:function(e){switch(e){case"up":return new t(this.row-1,this.col);case"left":return new t(this.row,this.col-1);case"down":return new t(this.row+1,this.col);case"across":case"right":return new t(this.row,this.col+1)}}}]),t}(),b=function(){function t(e,n,l){if(i()(this,t),this.isActive=!1,this.style="",this.position=new p(n,l),this.previous={},this.next={},this.clues={},this.value="",null===e)this.style="blank";else if("number"==typeof e.cell?this.number=e.cell:this.number="number"==typeof e?e:NaN,e.style)switch(e.style.barred){case"T":this.style="barred-top";break;case"L":this.style="barred-left";break;case"TL":this.style="barred-top barred-left"}else"#"==e&&(this.style="block")}return l()(t,[{key:"setValue",value:function(t){this.hasInput&&(this.value=t&&t.toUpperCase?t.toUpperCase():"")}},{key:"addHighlight",value:function(){this.isActive=!0}},{key:"clearHighlight",value:function(){this.isActive=!1}},{key:"isEndOfRange",value:function(t){return!this.hasInput||!("across"!=t||!this.previous.across||!/left/.test(this.style))||!("down"!=t||!this.previous.down||!/top/.test(this.style))}},{key:"check",value:function(){(this.value&&this.value.toUpperCase?this.value.toUpperCase():"")!==(this.solution&&this.solution.toUpperCase?this.solution.toUpperCase():"")&&this.clear()}},{key:"cheat",value:function(){this.solution&&this.setValue(this.solution)}},{key:"clear",value:function(){this.setValue("")}},{key:"isBirectional",get:function(){return this.clues.across&&this.clues.down}},{key:"hasInput",get:function(){return!/bl(an|oc)k/.test(this.style)}}]),t}(),f=function(){function t(){i()(this,t)}return l()(t,null,[{key:"parse",value:function(e,i,n){var l,c,s=e.puzzle.map((function(t,e){return t.map((function(t,i){return new b(t,e,i)}))})),u=t.attachSolutions(s,e.solution),o=Object.keys(e.clues),r=o.find((function(t){return/^across/i.test(t)})),g=o.find((function(t){return/^down/i.test(t)})),C=e.clues[r],a=e.clues[g],I=Array.isArray(C)?C:[];I=I.map((function(t){return new h(t,"across").toClueList()})).flat();var A=Array.isArray(a)?a:[];A=A.map((function(t){return new h(t,"down").toClueList()})).flat();var p={across:[],down:[]};return I.concat(A).forEach((function(e){var i=t.findCellForClue(s,e);e.position=i.position,e.cells=t.findCellList(s,e.position,e.direction),e.cells.forEach((function(t){return t.clues[e.direction]=e})),p[e.direction][e.number]=e})),p.across.heading=null!==(l=r.split(":")[1])&&void 0!==l?l:"Across",p.down.heading=null!==(c=g.split(":")[1])&&void 0!==c?c:"Down",new d(s,p,i,u,n)}},{key:"attachSolutions",value:function(t,e){return!!e&&(t.forEach((function(t,i){return t.forEach((function(t,n){if(e[i]&&e[i][n]){var l=e[i][n].value||e[i][n];l.toUpperCase&&/[A-Z]/i.test(l)&&(t.solution=l.toUpperCase())}}))})),!0)}},{key:"findCellForClue",value:function(t,e){return t.flat().find((function(t){return t.number==e.number}))}},{key:"findCellList",value:function(e,i,n,l){if(!i.isInside(e))return[];var c=e[i.row][i.col];return c.previous[n]=l,c.isEndOfRange(n)?[]:(l&&(l.next[n]=c),[c].concat(t.findCellList(e,i.increment(n),n,c)))}}]),t}(),x=t(38),v=t.n(x),B=function(){function t(e){i()(this,t),this.dom=e,this.spans=[],this.inputs=[],this.labels=[],this.clueListItems=[],this.buttons=[],this.grid=null,this.aboveClueBar=null,this.belowClueBar=null}return l()(t,[{key:"html",value:function(t,e,i){for(var n=document.createElement(t),l=0,c=Object.entries(e||{});l<c.length;l++){var s=v()(c[l],2),u=s[0],o=s[1];n.setAttribute(u,o)}return i&&(n.innerText=i),n}},{key:"update",value:function(t){this.spans.forEach((function(e,i){return e.forEach((function(e,n){var l=t.cells[i][n];l==t.focusedCell?e.input.focus():e&&e.input&&e.input.blur(),e.input&&(e.input.value=l.value),l.isActive?e.classList.add("highlighted"):e.classList.remove("highlighted")}))})),this.clueListItems.forEach((function(t){t.clue.isActive?t.clue.root?t.classList.add("halflighted"):t.classList.add("highlighted"):(t.classList.remove("highlighted"),t.classList.remove("halflighted"))})),t.focusedClue?(this.drawClue(t.focusedClue,this.aboveClueBar,!0),this.drawClue(t.focusedClue,this.belowClueBar,!0)):(this.aboveClueBar.innerHTML="",this.belowClueBar.innerHTML=""),this.savePuzzleStateToCookie(t)}},{key:"savePuzzleStateToCookie",value:function(t){var e=t.getState(),i=new Date(2100,1,1);document.cookie=t.cookieName+"="+e+";expires="+i.toUTCString()+";path=/"}},{key:"loadPuzzleStateFromCookie",value:function(t){var e=decodeURIComponent(document.cookie).split(/; */).map((function(t){return t.split("=")})).find((function(e){return e[0]==t.cookieName}));e&&e.length>1&&t.setState(e[1])}},{key:"createCellSpan",value:function(t,e,i){var n=this.html("span");if(t.style&&(n.className=t.style),t.number){var l=this.html("label");l.innerHTML=t.number,n.appendChild(l),this.labels.push(l)}if(t.hasInput){var c=this.html("input",{"data-row":e,"data-col":i,value:t.value});n.appendChild(c),n.input=c,this.inputs.push(c)}return n}},{key:"createClueEnumerationSpan",value:function(t){var e=this.html("span");return e.innerText="(".concat(t.enumeration.trim().replace(/ /g,","),")"),e}},{key:"createClueList",value:function(t,e){var i=this,n=t.clues[e.toLowerCase()],l="".concat(e.toLowerCase(),"-clue-list"),c=this.html("section",{class:"puzzle-clue-list",id:l}),s=this.html("h2");s.innerHTML=n.heading,c.appendChild(s);var u=this.html("ol");return n.forEach((function(t){var e=i.html("li",{id:t.elementId,"data-clue-number":t.number,"data-clue-direction":t.direction});i.drawClue(t,e),e.clue=t,i.clueListItems.push(e),u.appendChild(e)})),c.appendChild(u),c}},{key:"drawClue",value:function(t,e,i){e.innerHTML=t.text;var n=this.html("label");n.innerText=t.label+(i?"".concat(t.direction[0]):""),e.insertBefore(n,e.firstChild),t.enumeration&&e.appendChild(this.createClueEnumerationSpan(t))}},{key:"drawButtons",value:function(t,e){var i=this.html("button",{id:"check-clue-button"},"Check clue"),n=this.html("button",{id:"clear-clue-button"},"Clear clue"),l=this.html("button",{id:"cheat-clue-button"},"Cheat clue"),c=t?this.html("div",{id:"clue-buttons"}):this.html("div",{id:"clue-buttons",class:"no-solution"}),s=this.html("button",{id:"check-grid-button"},"Check grid"),u=this.html("button",{id:"clear-grid-button"},"Clear grid"),o=this.html("button",{id:"cheat-grid-button"},"Cheat grid"),r=t?this.html("div",{id:"grid-buttons"}):this.html("div",{id:"grid-buttons",class:"no-solution"});t?(c.appendChild(i),c.appendChild(n),c.appendChild(l),r.appendChild(s),r.appendChild(u),r.appendChild(o),this.buttons.push(i),this.buttons.push(n),this.buttons.push(l),this.buttons.push(s),this.buttons.push(u),this.buttons.push(o)):(c.appendChild(n),r.appendChild(u),this.buttons.push(n),this.buttons.push(u));var g=this.html("div",{id:"buttons"});if(g.appendChild(c),g.appendChild(r),null!==e){console.log("submitUrl: "+e);var C=this.html("button",{id:"submit-button",type:"button"},"Submit Answers"),a=this.html("div",{id:"submit-buttons"}),I=this.html("form",{method:"POST",action:e}),A=this.html("input",{type:"hidden",id:"answers",name:"answers"});a.appendChild(C),I.appendChild(a),I.appendChild(A),this.buttons.push(C),g.appendChild(I)}return g}},{key:"addDeveloperStylesheetLink",value:function(t){var e=this.html("link",{type:"text/css",rel:"stylesheet",href:"../css/ipuzzler.css"});this.dom.appendChild(e)}},{key:"render",value:function(t){var e=this;this.loadPuzzleStateFromCookie(t);var i=this.html("div",{class:"ipuzzler"});this.dom.appendChild(i);var n=this.html("style");n.innerText='div.ipuzzler{font-family:Arial,Helvetica,sans-serif;font-size:12px;margin:0;padding:3px;display:grid;grid-template:1fr/auto 1fr 1fr}div.ipuzzler *{line-height:1em}@media only screen and (max-width: 640px){div.ipuzzler{display:block}}@media only screen and (max-width: 320px){div.ipuzzler div.puzzle-grid span span.clue-number{font-size:6px}}div.ipuzzler div#buttons{text-align:center}div.ipuzzler div#buttons button{margin:6px 4px 2px 0px;width:6em;background-color:#36f;border:0;padding:4px;color:#fff;font-weight:normal;border-radius:4px}div.ipuzzler div#buttons div#grid-buttons button{background-color:#809fff}div.ipuzzler div#buttons div#grid-buttons.no-solution{display:inline}div.ipuzzler div#buttons div#clue-buttons.no-solution{display:inline}div.ipuzzler div#buttons div#clue-buttons.no-solution button{background-color:#809fff}div.ipuzzler div#buttons div#submit-buttons button{background-color:#36f;padding:6px;width:10em}div.ipuzzler div.clue-bar{display:none}@media only screen and (max-width: 640px){div.ipuzzler div.clue-bar{display:block}}div.ipuzzler div.clue-bar#above-clue-bar{margin-bottom:8px}div.ipuzzler div.clue-bar#below-clue-bar{margin:8px 0}div.ipuzzler div.clue-bar label{font-weight:bold}div.ipuzzler div.clue-bar label:after{content:" "}div.ipuzzler div.clue-bar span:before{content:" "}div.ipuzzler div.puzzle-grid{background-color:#ff0;display:grid;background-color:#000;grid-gap:1px;border:1px solid #000;width:420px;height:420px;max-width:100%;box-sizing:border-box;grid-template:repeat(15, 1fr)/repeat(15, 1fr);margin:0}@media only screen and (max-width: 640px){div.ipuzzler div.puzzle-grid{width:calc(100vw - 10px);height:calc(100vw - 10px)}}@media only screen and (max-width: 320px){div.ipuzzler div.puzzle-grid{width:310px;height:310px}}div.ipuzzler div.puzzle-grid>span{background-color:#fff;text-align:center;position:relative}div.ipuzzler div.puzzle-grid>span label{font-size:8px;position:absolute;margin:0;padding:0;top:1px;left:1px;z-index:0;background:transparent}div.ipuzzler div.puzzle-grid>span.block{background-color:#000}div.ipuzzler div.puzzle-grid>span.blank{background-color:#933}div.ipuzzler div.puzzle-grid>span.barred-top{border-top:3px solid #000}div.ipuzzler div.puzzle-grid>span.barred-left{border-left:3px solid #000}div.ipuzzler div.puzzle-grid>span.highlighted{background-color:#9cf}div.ipuzzler div.puzzle-grid>span input{position:absolute;left:0;right:0;top:0;bottom:0;background-color:transparent;z-index:1;width:100%;height:100%;border:0;margin:0 0 0 0;padding:10% 0 0 0;font-weight:bold;box-sizing:border-box;text-align:center;border-radius:0;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;mix-blend-mode:darken}div.ipuzzler div.puzzle-grid>span input:focus{font-weight:bold;background-color:#36f !important;outline:2px solid #000}div.ipuzzler section.puzzle-clue-list{padding:0 8px}@media only screen and (max-width: 640px){div.ipuzzler section.puzzle-clue-list{padding:0}}div.ipuzzler section.puzzle-clue-list h2{font-size:100%;margin:0 0 8px 0}div.ipuzzler section.puzzle-clue-list ol{cursor:pointer;list-style:none;margin:0;padding:0}div.ipuzzler section.puzzle-clue-list ol li{padding:4px 4px 4px 1.8em;margin:0 0 2px 0;border-radius:4px;text-indent:-1.8em;line-height:1.2em}div.ipuzzler section.puzzle-clue-list ol li.highlighted{background-color:#9cf}div.ipuzzler section.puzzle-clue-list ol li.halflighted{background-color:#bdf}div.ipuzzler section.puzzle-clue-list ol li label{min-width:1.4em;font-weight:bold;display:inline-block;text-indent:0;margin:0;padding:0 .3em 0 .1em}div.ipuzzler section.puzzle-clue-list ol li span:before{content:" "}\n/*# sourceURL=webpack://./src/ipuzzler.scss */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9pcHV6emxlci5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLGFBRUksc0NBQUEsQ0FDQSxjQUFBLENBQ0EsUUFBQSxDQUNBLFdBQUEsQ0FDQSxZQUFBLENBQ0EsOEJBQUEsQ0FOQSxlQUFBLGVBQUEsQ0FRQSwwQ0FUSixhQVVRLGFBQUEsQ0FBQSxDQUdKLDBDQUNJLG1EQUNJLGFBQUEsQ0FBQSxDQUdSLHlCQUNJLGlCQUFBLENBQ0EsZ0NBQ0ksc0JBQUEsQ0FDQSxTQUFBLENBQ0EscUJBQUEsQ0FDQSxRQUFBLENBQ0EsV0FBQSxDQUNBLFVBQUEsQ0FDQSxrQkFBQSxDQUNBLGlCQUFBLENBR0EsaURBQ0ksd0JBQUEsQ0FHUixzREFDSSxjQUFBLENBRUosc0RBQ0ksY0FBQSxDQUNBLDZEQUNJLHdCQUFBLENBSUosbURBQ0kscUJBQUEsQ0FDQSxXQUFBLENBQ0EsVUFBQSxDQUtaLDBCQUNJLFlBQUEsQ0FFQSwwQ0FISiwwQkFJUSxhQUFBLENBQUEsQ0FHSix5Q0FDSSxpQkFBQSxDQUdKLHlDQUNJLFlBQUEsQ0FHSixnQ0FDSSxnQkFBQSxDQUNBLHNDQUNJLFdBQUEsQ0FHUixzQ0FDSSxXQUFBLENBSVIsNkJBQ0kscUJBQUEsQ0FDQSxZQUFBLENBQ0EscUJBQUEsQ0FDQSxZQUFBLENBQ0EscUJBQUEsQ0FDQSxXQUFBLENBQ0EsWUFBQSxDQUNBLGNBQUEsQ0FDQSxxQkFBQSxDQUdBLDZDQUFBLENBWUEsUUFBQSxDQVZBLDBDQWRKLDZCQWVRLHdCQUFBLENBQ0EseUJBQUEsQ0FBQSxDQUdKLDBDQW5CSiw2QkFvQlEsV0FBQSxDQUNBLFlBQUEsQ0FBQSxDQUlKLGtDQVlJLHFCQUFBLENBQ0EsaUJBQUEsQ0FDQSxpQkFBQSxDQWJBLHdDQUNJLGFBQUEsQ0FDQSxpQkFBQSxDQUNBLFFBQUEsQ0FDQSxTQUFBLENBQ0EsT0FBQSxDQUNBLFFBQUEsQ0FDQSxTQUFBLENBQ0Esc0JBQUEsQ0FPSix3Q0FDSSxxQkFBQSxDQUVKLHdDQUNJLHFCQUFBLENBR0osNkNBQ0kseUJBQUEsQ0FHSiw4Q0FDSSwwQkFBQSxDQUVKLDhDQUNJLHFCQUFBLENBR0osd0NBQ0ksaUJBQUEsQ0FDQSxNQUFBLENBQ0EsT0FBQSxDQUNBLEtBQUEsQ0FDQSxRQUFBLENBQ0EsNEJBQUEsQ0FDQSxTQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxRQUFBLENBQ0EsY0FBQSxDQUNBLGlCQUFBLENBQ0EsZ0JBQUEsQ0FDQSxxQkFBQSxDQUNBLGlCQUFBLENBQ0EsZUFBQSxDQUNBLDBCQUFBLENBQ0Esd0JBQUEsQ0FDQSxnQkFBQSxDQUNBLHFCQUFBLENBQ0EsOENBQ0ksZ0JBQUEsQ0FDQSxnQ0FBQSxDQUNBLHNCQUFBLENBTWhCLHNDQUNJLGFBQUEsQ0FDQSwwQ0FGSixzQ0FHUSxTQUFBLENBQUEsQ0FFSix5Q0FDSSxjQUFBLENBQ0EsZ0JBQUEsQ0FHSix5Q0FDSSxjQUFBLENBQ0EsZUFBQSxDQUNBLFFBQUEsQ0FDQSxTQUFBLENBQ0EsNENBT0kseUJBQUEsQ0FDQSxnQkFBQSxDQUNBLGlCQUFBLENBQ0Esa0JBQUEsQ0FDQSxpQkFBQSxDQVZBLHdEQUNJLHFCQUFBLENBRUosd0RBQ0kscUJBQUEsQ0FPSixrREFDSSxlQUFBLENBQ0EsZ0JBQUEsQ0FDQSxvQkFBQSxDQUNBLGFBQUEsQ0FDQSxRQUFBLENBQ0EscUJBQUEsQ0FFSix3REFDSSxXQUFBIiwic291cmNlc0NvbnRlbnQiOlsiJHRhYmxldC13aWR0aDogNjQwcHg7XHJcblxyXG5kaXYuaXB1enpsZXIge1xyXG4gICAgKiB7IGxpbmUtaGVpZ2h0OiAxLjBlbTsgfVxyXG4gICAgZm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XHJcbiAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbiAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgZ3JpZC10ZW1wbGF0ZTogMWZyIC8gYXV0byAxZnIgMWZyO1xyXG5cclxuICAgIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogJHRhYmxldC13aWR0aCkge1xyXG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgfVxyXG5cclxuICAgIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogMzIwcHgpIHtcclxuICAgICAgICBkaXYucHV6emxlLWdyaWQgc3BhbiBzcGFuLmNsdWUtbnVtYmVyIHtcclxuICAgICAgICAgICAgZm9udC1zaXplOiA2cHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGl2I2J1dHRvbnMge1xyXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICBidXR0b24ge1xyXG4gICAgICAgICAgICBtYXJnaW46IDZweCA0cHggMnB4IDBweDtcclxuICAgICAgICAgICAgd2lkdGg6IDZlbTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzM2ZjtcclxuICAgICAgICAgICAgYm9yZGVyOiAwO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiA0cHg7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsO1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpdiNncmlkLWJ1dHRvbnMge1xyXG4gICAgICAgICAgICBidXR0b24ge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRlbigjMzZmLDE1JSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZGl2I2dyaWQtYnV0dG9ucy5uby1zb2x1dGlvbiB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGl2I2NsdWUtYnV0dG9ucy5uby1zb2x1dGlvbiB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZTtcclxuICAgICAgICAgICAgYnV0dG9uIHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0ZW4oIzM2ZiwxNSUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpdiNzdWJtaXQtYnV0dG9ucyB7XHJcbiAgICAgICAgICAgIGJ1dHRvbiB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzZmO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNnB4O1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwZW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGl2LmNsdWUtYmFyIHtcclxuICAgICAgICBkaXNwbGF5OiBub25lO1xyXG5cclxuICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6ICR0YWJsZXQtd2lkdGgpIHtcclxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAmI2Fib3ZlLWNsdWUtYmFyIHtcclxuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJiNiZWxvdy1jbHVlLWJhciB7XHJcbiAgICAgICAgICAgIG1hcmdpbjogOHB4IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsYWJlbCB7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICAmOmFmdGVyIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiIFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNwYW46YmVmb3JlIHtcclxuICAgICAgICAgICAgY29udGVudDogXCIgXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpdi5wdXp6bGUtZ3JpZCB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDtcclxuICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XHJcbiAgICAgICAgZ3JpZC1nYXA6IDFweDtcclxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwO1xyXG4gICAgICAgIHdpZHRoOiA0MjBweDtcclxuICAgICAgICBoZWlnaHQ6IDQyMHB4O1xyXG4gICAgICAgIG1heC13aWR0aDogMTAwJTtcclxuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG5cclxuICAgICAgICAvLyBEZWZhdWx0IGdyaWQgdGVtcGxhdGU7IG92ZXJ3cml0dGVuIGJ5IHJlbmRlcmVyXHJcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZTogcmVwZWF0KDE1LCAxZnIpIC8gcmVwZWF0KDE1LCAxZnIpO1xyXG5cclxuICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6ICR0YWJsZXQtd2lkdGgpIHtcclxuICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwdncgLSAxMHB4KTtcclxuICAgICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMHZ3IC0gMTBweCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDMyMHB4KSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAzMTBweDtcclxuICAgICAgICAgICAgaGVpZ2h0OiAzMTBweDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICAmID4gc3BhbiB7XHJcbiAgICAgICAgICAgIGxhYmVsIHtcclxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogOHB4O1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMDtcclxuICAgICAgICAgICAgICAgIHRvcDogMXB4O1xyXG4gICAgICAgICAgICAgICAgbGVmdDogMXB4O1xyXG4gICAgICAgICAgICAgICAgei1pbmRleDogMDtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xyXG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuXHJcbiAgICAgICAgICAgICYuYmxvY2sge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAmLmJsYW5rIHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM5MzM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICYuYmFycmVkLXRvcCB7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAzcHggc29saWQgIzAwMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJi5iYXJyZWQtbGVmdCB7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkICMwMDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJi5oaWdobGlnaHRlZCB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWNmO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbnB1dCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAwO1xyXG4gICAgICAgICAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgICAgICBib3R0b206IDA7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgICAgICAgICAgICAgIHotaW5kZXg6IDE7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICAgICAgICAgIGJvcmRlcjogMDtcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogMCAwIDAgMDtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwJSAwIDAgMDtcclxuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XHJcbiAgICAgICAgICAgICAgICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7IC8qIGlPUyBTYWZhcmkgKi9cclxuICAgICAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC8qIFNhZmFyaSAqL1xyXG4gICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7IC8qIE5vbi1wcmVmaXhlZCB2ZXJzaW9uLCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IENocm9tZSwgRWRnZSwgT3BlcmEgYW5kIEZpcmVmb3ggKi9cclxuICAgICAgICAgICAgICAgIG1peC1ibGVuZC1tb2RlOiBkYXJrZW47XHJcbiAgICAgICAgICAgICAgICAmOmZvY3VzIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzM2NmZmICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogMnB4IHNvbGlkICMwMDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2VjdGlvbi5wdXp6bGUtY2x1ZS1saXN0IHtcclxuICAgICAgICBwYWRkaW5nOiAwIDhweDtcclxuICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6ICR0YWJsZXQtd2lkdGgpIHtcclxuICAgICAgICAgICAgcGFkZGluZzogMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaDIge1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDEwMCU7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMCAwIDhweCAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb2wge1xyXG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICAgICAgcGFkZGluZzogMDtcclxuICAgICAgICAgICAgbGkge1xyXG4gICAgICAgICAgICAgICAgJi5oaWdobGlnaHRlZCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzljZjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICYuaGFsZmxpZ2h0ZWQge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNiZGY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggNHB4IDRweCAxLjhlbTtcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogMCAwIDJweCAwO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICAgICAgICAgICAgdGV4dC1pbmRlbnQ6IC0xLjhlbTtcclxuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjJlbTtcclxuICAgICAgICAgICAgICAgIGxhYmVsIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEuNGVtO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LWluZGVudDogMDtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCAwLjNlbSAwIDAuMWVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3BhbjpiZWZvcmUge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiIFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */',i.appendChild(n),this.addDeveloperStylesheetLink(this.dom),this.grid=this.html("div",{class:"puzzle-grid"}),this.grid.style.gridTemplate="repeat(".concat(t.height,", 1fr) / repeat(").concat(t.width,", 1fr)");var l=this.html("div");this.aboveClueBar=this.html("div",{class:"clue-bar",id:"above-clue-bar"}),this.belowClueBar=this.html("div",{class:"clue-bar",id:"below-clue-bar"}),l.appendChild(this.aboveClueBar),
l.appendChild(this.grid),l.appendChild(this.belowClueBar),l.appendChild(this.drawButtons(t.hasSolution,t.submitUrl)),i.appendChild(l),this.spans=t.cells.map((function(t,i){return t.map((function(t,n){var l=e.createCellSpan(t,i,n);return e.grid.appendChild(l),l}))})),i.appendChild(this.createClueList(t,"Across")),i.appendChild(this.createClueList(t,"Down")),this.resize(t)}},{key:"resize",value:function(t){var e=Math.min(this.grid.offsetWidth,this.grid.offsetHeight),i=Math.ceil(e/(1.8*t.width));i>10&&i<16&&(i=16),this.inputs.forEach((function(t){return t.style.fontSize=i+"px"}));var n=Math.ceil(e/(4*t.width));this.labels.forEach((function(t){return t.style.fontSize=n+"px"}));var l,c,s=Math.min(window.innerWidth,document.body.scrollWidth,document.body.clientWidth);s>768?(l=28*t.width+t.width+1,c=28*t.height+t.height+1):(l=s-10,c=Math.floor(t.height/t.width*l)),this.grid.style.width=l+"px",this.aboveClueBar.style.width=l+"px",this.belowClueBar.style.width=l+"px",this.grid.style.height=c+"px"}}]),t}(),Q=function(t){function e(){var t;return i()(this,e),(t=u.call(this)).shadow=t.attachShadow({mode:"open"}),t.addEventListener("keydown",t.keydown),window.addEventListener("resize",t.resize.bind(s()(t))),t}o()(e,t);var n,c,u=(n=e,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a()(n);if(c){var i=a()(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return g()(this,t)});return l()(e,[{key:"load",value:function(t,e){var i=this;fetch(t).then((function(t){return t.json()})).then((function(n){return i.init(n,t,e)}))}},{key:"init",value:function(t,e,i){var n=this;this.puzzle=f.parse(t,e,i),this.renderer=new B(this.shadow),this.renderer.render(this.puzzle),this.renderer.inputs.forEach((function(t){t.addEventListener("focus",n.inputFocus.bind(n)),t.addEventListener("mousedown",n.inputMouseDown.bind(n))})),this.renderer.clueListItems.forEach((function(t){return t.addEventListener("click",n.clueListItemClick.bind(n))})),this.renderer.buttons.forEach((function(t){return t.addEventListener("click",n.buttonClick.bind(n))})),this.resize()}},{key:"connectedCallback",value:function(){var t=this.getAttribute("src"),e=this.getAttribute("submitUrl");t&&this.load(t,e)}},{key:"attributeChangedCallback",value:function(t,e,i){switch(t){case"url":this.load(i)}}},{key:"resize",value:function(t){this.renderer&&"function"==typeof this.renderer.resize&&this.renderer.resize(this.puzzle)}},{key:"inputMouseDown",value:function(t){var e=t.target.getAttribute("data-row"),i=t.target.getAttribute("data-col");this.puzzle.setFocus(e,i,!0),this.renderer.update(this.puzzle)}},{key:"inputFocus",value:function(t){var e=t.target.getAttribute("data-row"),i=t.target.getAttribute("data-col");this.puzzle.setFocus(e,i),this.renderer.update(this.puzzle)}},{key:"clueListItemClick",value:function(t){var e=t.target.closest("li"),i=parseInt(e.getAttribute("data-clue-number")),n=e.getAttribute("data-clue-direction");this.puzzle.focusClue(i,n),this.renderer.update(this.puzzle)}},{key:"buttonClick",value:function(t){var e=t.target;switch(e.id){case"check-clue-button":this.puzzle.checkClue();break;case"clear-clue-button":this.puzzle.clearClue();break;case"cheat-clue-button":this.puzzle.cheatClue();break;case"check-grid-button":this.puzzle.checkGrid();break;case"clear-grid-button":this.puzzle.clearGrid();break;case"cheat-grid-button":confirm("Are you sure you want to reveal all solutions?")&&this.puzzle.cheatGrid();break;case"submit-button":this.puzzle.submitGrid(e.closest("form"))}this.renderer.update(this.puzzle)}},{key:"keydown",value:function(t){if(!(t.ctrlKey||t.altKey||t.metaKey)){switch(t.code){case"ArrowUp":this.puzzle.direction="down",this.puzzle.moveFocus("up");break;case"ArrowDown":this.puzzle.direction="down",this.puzzle.moveFocus("down");break;case"ArrowLeft":this.puzzle.direction="across",this.puzzle.moveFocus("left");break;case"ArrowRight":this.puzzle.direction="across",this.puzzle.moveFocus("right");break;case"Home":this.puzzle.home();break;case"End":this.puzzle.end();break;case"Backspace":this.puzzle.backspace();break;case"Delete":this.puzzle.setCellValue("");break;case"Escape":this.puzzle.clearFocus()}/^[a-z]$/i.test(t.key)&&(this.puzzle.setCellValue(t.key),t.preventDefault()),this.renderer.update(this.puzzle)}}}],[{key:"observedAttributes",get:function(){return["url"]}}]),e}(A()(HTMLElement));customElements.define("ipuzzler-puzzle",Q)}(),function(){"use strict";t.p}()}();