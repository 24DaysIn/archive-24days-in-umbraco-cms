<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">


	<title>6 Easy Configuration Tweaks</title>
<meta name="description" content="A collection of easy configuration tweaks that can save developers time finding solutions, remove issues for editors and make some front end website performance improvements.">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="/assets/24days-archive.css">
	<link rel="apple-touch-icon" href="/assets/24days-touch-icon.png">
		
	
	
</head>
<body>
	



<section class="page"><main class="article"><header><h1 class="header">6 Easy Configuration Tweaks</h1>
      <p class="byline"> by Jeavon Leopold, <span class="pubdate">posted on <time datetime="2013-12-06">Dec 6, 2013</time></span></p></header><div class="notification warning">
      <h2>Heads Up!</h2>
      <p>
					This article is several years old now, and much has happened since then,
					so please keep that in mind while reading it.
				</p>
    </div>
    <div class="content-column">
      <p class="teaser">At <a href="http://www.crumpled-dog.com/" target="_blank">Crumpled Dog</a>, we have built up a collection of easy configuration tweaks over the years that can save developers time finding solutions, remove issues for editors and make some front end website performance improvements. We have these configuration tweaks already in place in our internal framework so that every new project has them from the start; all these tweaks are also all included in the <a href="https://github.com/jbreuer/Hybrid-Framework-Best-Practices" target="_blank">Hybrid MVC Framework project</a>.</p>
<h3>1. Maximum upload size</h3>
<p class="intro">By default the maximum file size you can upload to Umbraco is 4Mb, which is easily exceeded by a PDF or Word document. To update the maximum size of files that can be uploaded to your Umbraco installation requires you to edit two different sections of Web.Config.</p>
<p>Within the System.Web section of Web.Config locate the httpRuntime element and add the maxRequestLength attribute. The value of the maxRequestLength attribute is in kilobytes (example is 150Mb)</p>
<pre class="language-markup"><code>&lt;httpRuntime requestValidationMode="2.0" enableVersionHeader="false" maxRequestLength="153600" /&gt;</code></pre>
<p>Then within the system.webServer section of Web.Config check to see if you already have a security element, if you do, add only the inner elements from the snippet below, if you don't already have one add the entire snippet. The value of maxAllowedContentLength is in bytes (example is 150Mb)</p>
<pre class="language-markup"><code>&lt;!-- Max file size limitation --&gt;
&lt;security&gt;
  &lt;requestFiltering&gt;
	&lt;requestLimits maxAllowedContentLength="157286400" /&gt;
  &lt;/requestFiltering&gt;
&lt;/security&gt;   </code></pre>
<h3>2. Maximum JSON serialization length</h3>
<p><em>This one doesn't apply to Umbraco v7</em></p>
<p>One day you may find that Multi-node tree picker has suddenly stopped showing any content within the tree, this is possibly caused by your website having grown to the point that the maximum JSON length for the ASP.NET AJAX toolkit has been exceeded. This more commonly affects Embedded Content and other third party property editors that use the ASP.NET AJAX toolkit that store significant amounts of data in JSON strings.</p>
<p>Locate the system.web.extensions element, then add the webServices element and the jsonSerialization element within it as shown below. The value of maxJsonLength is the maximum number of characters, the default is 2097152.</p>
<pre class="language-markup"><code>&lt;!-- ASPNETAJAX --&gt;
&lt;system.web.extensions&gt;
&lt;scripting&gt;
  &lt;scriptResourceHandler enableCompression="true" enableCaching="true" /&gt;
  &lt;webServices&gt;
	&lt;jsonSerialization maxJsonLength="5000000" /&gt;
  &lt;/webServices&gt;    
&lt;/scripting&gt;
&lt;/system.web.extensions&gt;</code></pre>
<h3>3. SVG and other common mime types</h3>
<p>By default IIS does not understand what a .svg file is and will not serve any files that have been added by a designer or front end developer, they may spend many hours trying to work out what they have done wrong. Of course you can also add mime types to IIS that will apply to all websites but this isn't possible with all hosting environments so you can easily add the mime types within Web.config.</p>
<p>Locate the staticContent element within the system.webServer section, you should find the .air mime type already there, now you can add the SVG mime type and other commonly added file types such as ttf.</p>
<pre class="language-markup"><code>&lt;staticContent&gt;
  &lt;remove fileExtension=".air" /&gt;
  &lt;mimeMap fileExtension=".air" mimeType="application/vnd.adobe.air-application-installer-package+zip" /&gt;
  &lt;remove fileExtension=".svg" /&gt;
  &lt;mimeMap fileExtension=".svg" mimeType="image/svg+xml" /&gt;
  &lt;remove fileExtension=".ttf" /&gt;
  &lt;mimeMap fileExtension=".ttf" mimeType="font/ttf" /&gt;   	  
&lt;/staticContent&gt;</code></pre>
<h3>4. Static content client caching</h3>
<p>When testing your site using Google's PageSpeed to Yahoo's YSlow you may find that you are being told to "Leverage browser caching" and that your images and other static content are being flagged.</p>
<p><img src="/archive/media/2013/clientcache_496x270.jpg" width="496" height="270" alt="Browsercaching"></p>
<p>A cache header is sent to the browser by IIS telling it how long it should keep the asset in its cache before requesting it again; this is easily configured in Web.Config and set to the recommended 7 day minimum.</p>
<p>Locate the staticContent element within system.webServer section and add the below clientCache element (generally below the above Mime types).</p>
<pre class="language-markup"><code>&lt;clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="7.00:00:00" /&gt;
</code></pre>
<h3>5. Static and Dynamic Url Compression</h3>
<p>As with the client caching above you may find that your are being told to "Enable compression" by site optimisation tools.</p>
<p><img src="/archive/media/2013/compression_496x270.jpg" width="496" height="270" alt="Enablecompression"></p>
<p>When enabled, resources sent to the browser are compressed on the server and then decompressed within the browser therefore minimising the transfer payload between server and browser. In order to use the compression built into IIS, you need to install the Static and Dynamic compression modules. The static module will compress static assets such as images and stylesheets, while the dynamic module will compress the html that is rendered by Umbraco. The dynamic module utilises CPU to perform the compression so you should make sure you have ample server power available on very busy websites.</p>
<p>The modules are installed using the "Turn Windows features on or off" option within control panel or by using the server role manager as shown below:</p>
<p><img src="/archive/media/2013/IISModule.JPG" width="349" height="198" alt="Iismodule"></p>
<p>Once the modules are installed, add the urlCompression element as shown below within the system.webServer section of Web.config</p>
<pre class="language-markup"><code>&lt;urlCompression doStaticCompression="true" doDynamicCompression="true" /&gt;
</code></pre>
<p>Now all requests from the server will be sent to the browser using compression.</p>
<h3>6. Url character replacement</h3>
<p>Google's spider doesn't like them and they certainly don't look nice, having a URL with unusual characters in it just isn't a good idea. Umbraco v6 (and v4) come with a decent default list however there are plenty that need adding.</p>
<p>Umbraco v6.2 and v7 have a new built-in character replacement system, so Umbraco will now remove unusual characters automatically, however you can override certain characters by adding the urlReplacing section to your umbracoSettings.config as existed in earlier versions. An example of when this might be useful are currency symbols below, by default Umbraco v6.2+ would remove the symbol entirely, for example, a node name of "Share price reaches £400" would become /share-price-reaches-400/ by adding the pound replacement it would become /share-price-reaches-gbp400/</p>
<p><img src="/archive/media/2013/Chars.JPG" width="245" height="482" alt="Chars"></p>
<p>Click <a href="/archive/media/2013/Chars.txt" target="_blank">here</a> for a txt file of the above</p>
<hr>
<p>For a talk through of all of these tweaks, more agency best practice and a demo of the hybrid MVC Framework you can watch Jeroen Breuer and myself at the 2013 UK Umbraco Festival <a href="http://www.youtube.com/watch?v=BxOx-9jWF7A" target="_blank">here</a>.</p>
    </div><footer><ul class="tags">
        <li><a rel="tag" href="/umbraco-cms/tags/configuration/" title="See all articles tagged with Configuration">Configuration</a></li>
        <li><a rel="tag" href="/umbraco-cms/tags/v4/" title="See all articles tagged with v4">v4</a></li>
        <li><a rel="tag" href="/umbraco-cms/tags/v6/" title="See all articles tagged with v6">v6</a></li>
        <li><a rel="tag" href="/umbraco-cms/tags/v7/" title="See all articles tagged with v7">v7</a></li>
      </ul></footer><section class="bios"><div class="bio">
        <div class="gravatar" title="Jeavon Leopold"><img src="//gravatar.com/avatar/e0104aabbb25a50693daa0220b2ce31d.jpg?d=mm&amp;s=150" srcset="//gravatar.com/avatar/e0104aabbb25a50693daa0220b2ce31d.jpg?d=mm&amp;s=300 2x" width="150" height="150"></div>
        <h1>Jeavon Leopold</h1>
        <p>Jeavon is on Twitter as <a href="//twitter.com/crumpled_jeavon" title="Jeavon Leopold on Twitter" rel="author">@crumpled_jeavon</a></p>
      </div></section><section class="comments"><div id="disqus_thread"></div></section></main><nav class="dates-navbar"><a href="/umbraco-cms/2013/" class="home-link"><span class="scr-text">Home</span></a><ol>
      <li><a title="Editor-proofing Umbraco" href="/umbraco-cms/2013/editor-proofing-umbraco/"><span class="scr-text">Editor-proofing Umbraco</span></a></li>
      <li><a title="All your logs are belong to log4net" href="/umbraco-cms/2013/log4net-in-umbraco/"><span class="scr-text">All your logs are belong to log4net</span></a></li>
      <li><a title="Bust a cache" href="/umbraco-cms/2013/cache-busting/"><span class="scr-text">Bust a cache</span></a></li>
      <li><a title="Get More Out of Umbraco Using Server-Side Caching Strategies" href="/umbraco-cms/2013/get-more-out-of-umbraco-using-server-side-caching-strategies/"><span class="scr-text">Get More Out of Umbraco Using Server-Side Caching Strategies</span></a></li>
      <li><a title="How GitHub Snippets for Umbraco 7 was built" href="/umbraco-cms/2013/github-snippets-for-umbraco/"><span class="scr-text">How GitHub Snippets for Umbraco 7 was built</span></a></li>
      <li class="selected"><a title="6 Easy Configuration Tweaks" href="/umbraco-cms/2013/6-easy-configuration-tweaks/"><span class="scr-text">6 Easy Configuration Tweaks</span></a></li>
      <li><a title="Mapping Umbraco content to POCOs for strongly typed views" href="/umbraco-cms/2013/mapping-content-to-pocos/"><span class="scr-text">Mapping Umbraco content to POCOs for strongly typed views</span></a></li>
      <li><a title="The worlds friendliest post on getting started with Examine" href="/umbraco-cms/2013/getting-started-with-examine/"><span class="scr-text">The worlds friendliest post on getting started with Examine</span></a></li>
      <li><a title="Creating reusable code in MVC apps" href="/umbraco-cms/2013/creating-reusable-code-in-mvc-apps/"><span class="scr-text">Creating reusable code in MVC apps</span></a></li>
      <li><a title="Why you should care about emotions when building a web shop" href="/umbraco-cms/2013/emotional-commerce/"><span class="scr-text">Why you should care about emotions when building a web shop</span></a></li>
      <li><a title="How And Why We Do Umbraco MVC" href="/umbraco-cms/2013/how-and-why-we-do-umbraco-mvc/"><span class="scr-text">How And Why We Do Umbraco MVC</span></a></li>
      <li><a title="The Dictionary Secrets" href="/umbraco-cms/2013/the-dictionary-secrets/"><span class="scr-text">The Dictionary Secrets</span></a></li>
      <li><a title="Data = Knowledge" href="/umbraco-cms/2013/data-=-knowledge/"><span class="scr-text">Data = Knowledge</span></a></li>
      <li><a title="Content-First in Umbraco" href="/umbraco-cms/2013/content-first/"><span class="scr-text">Content-First in Umbraco</span></a></li>
      <li><a title="Hybrid Framework" href="/umbraco-cms/2013/hybrid-framework/"><span class="scr-text">Hybrid Framework</span></a></li>
      <li><a title="The uSync Soft Shoe Shuffle" href="/umbraco-cms/2013/the-usync-soft-shoe-shuffle/"><span class="scr-text">The uSync Soft Shoe Shuffle</span></a></li>
      <li><a title="No More Empty Tabs, Please " href="/umbraco-cms/2013/empty-tabs/"><span class="scr-text">No More Empty Tabs, Please </span></a></li>
      <li><a title="Sharing is caring - The 301 Url Tracker" href="/umbraco-cms/2013/sharing-is-caring/"><span class="scr-text">Sharing is caring - The 301 Url Tracker</span></a></li>
      <li><a title="Umbraco V7 Compatible packages" href="/umbraco-cms/2013/v7-packages/"><span class="scr-text">Umbraco V7 Compatible packages</span></a></li>
      <li><a title="What's in a Document Type anyway?" href="/umbraco-cms/2013/documenttypes/"><span class="scr-text">What's in a Document Type anyway?</span></a></li>
      <li><a title="One member to rule them all" href="/umbraco-cms/2013/one-member-to-rule-them-all/"><span class="scr-text">One member to rule them all</span></a></li>
      <li><a title="Injecting the backoffice into the backoffice" href="/umbraco-cms/2013/injecting-the-backoffice-into-the-backoffice/"><span class="scr-text">Injecting the backoffice into the backoffice</span></a></li>
      <li><a title="Dashboard overload" href="/umbraco-cms/2013/dashboard-overload/"><span class="scr-text">Dashboard overload</span></a></li>
      <li><a title="Christmas Edition" href="/umbraco-cms/2013/christmas-edition/"><span class="scr-text">Christmas Edition</span></a></li>
    </ol></nav></section>


	<script type="module" src="/assets/ipuzzler.js"></script>
	<script defer src="/assets/libs.min.js"></script>
	<script defer src="/assets/app.js"></script>
	
</body>
</html>
