<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">


	<title>Sharing is caring - The 301 Url Tracker</title>
<meta name="description" content="A post about the 301 Url Tracker umbraco package, the vision of InfoCaster about open-source and sharing with the community and single assembly development.">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="/assets/24days-archive.css">
	<link rel="apple-touch-icon" href="/assets/24days-touch-icon.png">
		
	
	
</head>
<body>
	



<section class="page"><main class="article"><header><h1 class="header">Sharing is caring - The 301 Url Tracker</h1>
      <p class="byline"> by Stefan Kip, <span class="pubdate">posted on <time datetime="2013-12-18">Dec 18, 2013</time></span></p></header><div class="notification warning">
      <h2>Heads Up!</h2>
      <p>
					This article is several years old now, and much has happened since then,
					so please keep that in mind while reading it.
				</p>
    </div>
    <div class="content-column">
      <p class="teaser">This post is all about the <a href="http://our.umbraco.org/projects/developer-tools/301-url-tracker" target="_blank">301 Url Tracker package</a>, which I've built 3,5 years ago as my graduation project <a href="http://www.infocaster.net/" target="_blank">here at InfoCaster</a>, which I passed by the way ;-)</p>
<p class="intro"><a href="https://twitter.com/rsoeteman" target="_blank">Richard Soeteman</a> came up with the idea for this package (have you checked his excellent <a href="http://soetemansoftware.nl/seo-checker" target="_blank">SEO Checker package</a> by the way?) and thought it would be nice for me to build it, and so it began!<br> I'd also like to tell a bit about the open-source philosophy at the company I work for, InfoCaster, and the single assembly practice, which I've used for version 2 of the Url Tracker.</p>
<h3>301 Url Tracker</h3>
<p>Maybe you've heard about it or even used it, I do hope so! If not, this paragraph is for you! This package helps you with managing URLs in you umbraco website. It's a very nifty tool for redirecting indexed URLs of your old website to your new umbraco website. This way you won't lose the current SEO ranking. In fact, it's possible to create any <span style="text-decoration: underline;">redirect</span> you want, even if a page already exists for the chosen URL to redirect from (since v2.4.0). If you want to learn more about the package, <a href="http://our.umbraco.org/projects/developer-tools/301-url-tracker" target="_blank">have a look at the project's page</a>!</p>
<figure>
  <a href="/archive/media/2013/urltracker_overview.png">
    <img src="/archive/media/2013/urltracker_overview.png" alt="The Url Tracker overview UI" width="715">
  </a>
  <figcaption>The Url Tracker overview UI</figcaption>
</figure>
<p>Version 2 of the Url Tracker is much better than the first version. It has been rebuilt from the ground up to support multi-domain umbraco websites, logging and other nice features version 1 didn't have. Besides that, the quality of the code is a lot better. I've also started using <a href="https://github.com/kipusoep/UrlTracker" target="_blank">Github</a> for source control and maintained a detailed changelog for every version 2 release.</p>
<p>I've chosen to use a single-assembly approach for version 2, because it wat such a hassle to do upgrades with v1 (from v1.x to v1.vNext). Also I've tried to change as few files as possible. Version 2 only makes a change to the Dashboard.config file. The HttpModule is configured dynamically by using the <a href="http://msdn.microsoft.com/query/dev12.query?appId=Dev12IDEF1&amp;l=EN-US&amp;k=k(Microsoft.Web.Infrastructure.DynamicModuleHelper.DynamicModuleUtility.RegisterModule);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.0);k(DevLang-csharp)&amp;rd=true" target="_blank">DynamicModuleUtility.RegisterModule method</a>.<br>The huge benefit of this approach is that it's really easy to update the Url Tracker; just replace the assembly or install the newer version via the umbraco back-office.</p>
<h3>InfoCaster's open-source philosophy</h3>
<p dir="ltr"><span>At InfoCaster we strongly believe in open-source and love Microsoft .Net. This seems to be a contradicting affection, but it's exactly why we've selected Umbraco in the first place. Although we've had some serious issues with Umbraco in the beginning, we have kept using Umbraco and promote it as a platform to our customers.</span></p>
<p dir="ltr"><span>In the true spirit of open-source, at InfoCaster, we think that using open-source also means contributing to the community. We have actively been part of the community ever since starting and using Umbraco. It was a logical step for us to create an open source package when we ran into 301 redirecting problems for our customers. Having this feature in Umbraco would be beneficial for all Umbraco users, instead of just our clients.</span></p>
<p dir="ltr"><span>Keeping Umbraco competitive and free is good for the reputation of Umbraco, a good reputation for Umbraco is also good for us.<br>Even when we have gotten feedback that the improved second version of the Url Tracker should become a commercial package, we never doubted our decision to make it open-source and free for anybody to use.</span></p>
<p dir="ltr"><span>If we all keep sharing and caring about Umbraco and each others tools, I think we can stay ahead of other open and even closed source CMS vendors.</span></p>
<figure>
  <a href="/archive/media/2013/urltracker_twitter.jpg">
    <img src="/archive/media/2013/urltracker_twitter.jpg" width="538" alt="Discussion on Twitter about commercializing the UrlTracker">
  </a>
  <figcaption>Discussion on Twitter about commercializing the UrlTracker</figcaption>
</figure>
<h3>Single assembly packaging</h3>
<p>I really wanted to keep version 2 of the UrlTracker as simple as possible, especially when it comes to installing, configuring and upgrading the package! That's why I've decided to make sure the UrlTracker consists of a single assembly, nothing more. This assembly contains all resources used by the UrlTracker, like CSS, javascript, images and SQL files, just like <a href="https://github.com/leekelleher/uComponents" target="_blank">uComponents</a> does. I've also made a built-in installer to install the SQL table, dashboard entry and perform some additional checks.</p>
<p>When I started developing this package, I knew very little about how to build a complete package into a single assembly, so I started off by looking at the uComponents source and searching for information on the web about this topic. Inclusing basic resources like CSS, javascript and images wasn't that big of a deal, as long as you'll set the Build Action to "Embedded Resource" and add an entry in the AssemblyInfo.cs file:</p>
<pre class="language-markup"><code>[assembly: WebResource("InfoCaster.Umbraco.UrlTracker.UI.res.css.urltracker.css", "text/css", PerformSubstitution = true)]</code></pre>
      <p class="snippet-caption">An example entry for the AssemblyInfo.cs file</p>
<p>Setting PerformSubstitution to true gives you the ability to reference embedded image files within your stylesheet:</p>
<pre class="language-markup"><code>[class^="icon-"],
[class*=" icon-"] {
	background-image: url('&lt;%= WebResource("InfoCaster.Umbraco.UrlTracker.UI.res.img.glyphicons-halflings.png") %&gt;');
}</code></pre>
<p>And here's an example of loading static resources in your mark-up:</p>
<pre class="language-markup"><code>&lt;link rel="stylesheet" type="text/css" href="&lt;%= Page.ClientScript.GetWebResourceUrl(typeof(UrlTrackerResources), "InfoCaster.Umbraco.UrlTracker.UI.res.css.urltracker.css") %&gt;" /&gt;
&lt;script type="text/javascript" src="&lt;%= Page.ClientScript.GetWebResourceUrl(typeof(UrlTrackerResources), "InfoCaster.Umbraco.UrlTracker.UI.res.js.main.js") %&gt;"&gt;&lt;/script&gt;</code></pre>
      <p class="snippet-caption">Using embedded static files, like CSS and javascript</p>
<p>I just had to write my own <a href="http://www.codeproject.com/Articles/15494/Load-WebForms-and-UserControls-from-Embedded-Resou" target="_blank">VirtualPathProvider</a>. By using this provider I was able to load usercontrols by using the registered Virtual Path, in this case "/Umbraco/UrlTracker/".<br>For example, when I need to load a UserControl into the page, I define the UserControl as a protected variable in the page's class and load it like this:</p>
<pre class="language-markup"><code>protected CustomView icCustomView;

protected override void OnInit(EventArgs e)
{
	base.OnInit(e);
	
	// Load the UserControl from the assembly
	icCustomView = (CustomView)LoadControl("/Umbraco/UrlTracker/InfoCaster.Umbraco.UrlTracker.UI.UserControls.CustomView.ascx");
	// Add to a Panel or PlaceHolder
	pnlEditValidationGroup.Controls.Add(icCustomView);
}</code></pre>
      <p class="snippet-caption">Loading a UserControl by using the registered VirtualPath</p>
<h3>Final words</h3>
<p>Building version 2 of the Url Tracker was really awesome and I've learned a lot from it! We hope you'll enjoy using this package as much as we do. Curious to know what is under the hood? <a href="https://github.com/kipusoep/UrlTracker" target="_blank">Just visit Github and download the source</a>!</p>
<p>I really hope package developers will think about the update process and start using the single assembly technique whenever they can, it's really not that hard.</p>
<p>An updated version compatible with umbraco v7 will be available soon! If you have any further questions, or if you'd like to tell me what you think of this post, please do not hesitate to contact me on Twitter.</p>
    </div><footer><ul class="tags">
        <li><a rel="tag" href="/umbraco-cms/tags/backoffice/" title="See all articles tagged with Backoffice">Backoffice</a></li>
        <li><a rel="tag" href="/umbraco-cms/tags/online-marketing/" title="See all articles tagged with Online marketing">Online marketing</a></li>
        <li><a rel="tag" href="/umbraco-cms/tags/package/" title="See all articles tagged with Package">Package</a></li>
        <li><a rel="tag" href="/umbraco-cms/tags/v4/" title="See all articles tagged with v4">v4</a></li>
        <li><a rel="tag" href="/umbraco-cms/tags/v6/" title="See all articles tagged with v6">v6</a></li>
        <li><a rel="tag" href="/umbraco-cms/tags/v7/" title="See all articles tagged with v7">v7</a></li>
      </ul></footer><section class="bios"><div class="bio">
        <div class="gravatar" title="Stefan Kip"><img src="//gravatar.com/avatar/38688823d886d6cb732de0ccd90cf370.jpg?d=mm&amp;s=150" srcset="//gravatar.com/avatar/38688823d886d6cb732de0ccd90cf370.jpg?d=mm&amp;s=300 2x" width="150" height="150"></div>
        <h1>Stefan Kip</h1>
        <p>Stefan is on Twitter as <a href="//twitter.com/kipusoep" title="Stefan Kip on Twitter" rel="author">@kipusoep</a></p>
      </div></section><section class="comments"><div id="disqus_thread"></div></section></main><nav class="dates-navbar"><a href="/umbraco-cms/2013/" class="home-link"><span class="scr-text">Home</span></a><ol>
      <li><a title="Editor-proofing Umbraco" href="/umbraco-cms/2013/editor-proofing-umbraco/"><span class="scr-text">Editor-proofing Umbraco</span></a></li>
      <li><a title="All your logs are belong to log4net" href="/umbraco-cms/2013/log4net-in-umbraco/"><span class="scr-text">All your logs are belong to log4net</span></a></li>
      <li><a title="Bust a cache" href="/umbraco-cms/2013/cache-busting/"><span class="scr-text">Bust a cache</span></a></li>
      <li><a title="Get More Out of Umbraco Using Server-Side Caching Strategies" href="/umbraco-cms/2013/get-more-out-of-umbraco-using-server-side-caching-strategies/"><span class="scr-text">Get More Out of Umbraco Using Server-Side Caching Strategies</span></a></li>
      <li><a title="How GitHub Snippets for Umbraco 7 was built" href="/umbraco-cms/2013/github-snippets-for-umbraco/"><span class="scr-text">How GitHub Snippets for Umbraco 7 was built</span></a></li>
      <li><a title="6 Easy Configuration Tweaks" href="/umbraco-cms/2013/6-easy-configuration-tweaks/"><span class="scr-text">6 Easy Configuration Tweaks</span></a></li>
      <li><a title="Mapping Umbraco content to POCOs for strongly typed views" href="/umbraco-cms/2013/mapping-content-to-pocos/"><span class="scr-text">Mapping Umbraco content to POCOs for strongly typed views</span></a></li>
      <li><a title="The worlds friendliest post on getting started with Examine" href="/umbraco-cms/2013/getting-started-with-examine/"><span class="scr-text">The worlds friendliest post on getting started with Examine</span></a></li>
      <li><a title="Creating reusable code in MVC apps" href="/umbraco-cms/2013/creating-reusable-code-in-mvc-apps/"><span class="scr-text">Creating reusable code in MVC apps</span></a></li>
      <li><a title="Why you should care about emotions when building a web shop" href="/umbraco-cms/2013/emotional-commerce/"><span class="scr-text">Why you should care about emotions when building a web shop</span></a></li>
      <li><a title="How And Why We Do Umbraco MVC" href="/umbraco-cms/2013/how-and-why-we-do-umbraco-mvc/"><span class="scr-text">How And Why We Do Umbraco MVC</span></a></li>
      <li><a title="The Dictionary Secrets" href="/umbraco-cms/2013/the-dictionary-secrets/"><span class="scr-text">The Dictionary Secrets</span></a></li>
      <li><a title="Data = Knowledge" href="/umbraco-cms/2013/data-=-knowledge/"><span class="scr-text">Data = Knowledge</span></a></li>
      <li><a title="Content-First in Umbraco" href="/umbraco-cms/2013/content-first/"><span class="scr-text">Content-First in Umbraco</span></a></li>
      <li><a title="Hybrid Framework" href="/umbraco-cms/2013/hybrid-framework/"><span class="scr-text">Hybrid Framework</span></a></li>
      <li><a title="The uSync Soft Shoe Shuffle" href="/umbraco-cms/2013/the-usync-soft-shoe-shuffle/"><span class="scr-text">The uSync Soft Shoe Shuffle</span></a></li>
      <li><a title="No More Empty Tabs, Please " href="/umbraco-cms/2013/empty-tabs/"><span class="scr-text">No More Empty Tabs, Please </span></a></li>
      <li class="selected"><a title="Sharing is caring - The 301 Url Tracker" href="/umbraco-cms/2013/sharing-is-caring/"><span class="scr-text">Sharing is caring - The 301 Url Tracker</span></a></li>
      <li><a title="Umbraco V7 Compatible packages" href="/umbraco-cms/2013/v7-packages/"><span class="scr-text">Umbraco V7 Compatible packages</span></a></li>
      <li><a title="What's in a Document Type anyway?" href="/umbraco-cms/2013/documenttypes/"><span class="scr-text">What's in a Document Type anyway?</span></a></li>
      <li><a title="One member to rule them all" href="/umbraco-cms/2013/one-member-to-rule-them-all/"><span class="scr-text">One member to rule them all</span></a></li>
      <li><a title="Injecting the backoffice into the backoffice" href="/umbraco-cms/2013/injecting-the-backoffice-into-the-backoffice/"><span class="scr-text">Injecting the backoffice into the backoffice</span></a></li>
      <li><a title="Dashboard overload" href="/umbraco-cms/2013/dashboard-overload/"><span class="scr-text">Dashboard overload</span></a></li>
      <li><a title="Christmas Edition" href="/umbraco-cms/2013/christmas-edition/"><span class="scr-text">Christmas Edition</span></a></li>
    </ol></nav></section>


	<script type="module" src="/assets/ipuzzler.js"></script>
	<script defer src="/assets/libs.min.js"></script>
	<script defer src="/assets/app.js"></script>
	
</body>
</html>
