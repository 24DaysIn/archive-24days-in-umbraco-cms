<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">


	<title>Taking Open Graph to the next level</title>
<meta name="description" content="Get to know about Open Graph and checkout some code to create the tags consistently in your shareable projects">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="/assets/24days-archive.css">
	<link rel="apple-touch-icon" href="/assets/24days-touch-icon.png">
		
	
	
</head>
<body>
	



<section class="page"><main class="article"><header><h1 class="header">Taking Open Graph to the next level</h1>
      <p class="byline"> by Anders Bjerner, <span class="pubdate">posted on <time datetime="2014-12-06">Dec 6, 2014</time></span></p></header><div class="notification warning">
      <h2>Heads Up!</h2>
      <p>
					This article is several years old now, and much has happened since then,
					so please keep that in mind while reading it.
				</p>
    </div>
    <div class="content-column">
      <p class="teaser">Ever tried sharing a link on social services like Facebook, and the preview generated by Facebook only shows some general description about the site, and a thumbnail that has nothing to do with the article or page you were about to share? Then that site most likely doesn't use Open Graph.</p>
<p class="intro"><strong>So what is Open Graph?</strong></p>
<p>Originally created by Facebook, the Open Graph protocol is in short terms a set of meta tags that describe a given page: eg. the title of the page, a summary/description or even an image or video that is shown on the page. The meta tags are then used when you share that page on Facebook, LinkedIn or a similar service that uses Open Graph.</p>
<p>If the Open Graph meta tags aren't present, Facebook (and similar services) will just grab a somewhat random text, and most likely just the first image on page as a thumbnail.</p>
<p>Also if the a page is using AngularJS, you might end up seing something like this:</p>
<p><img src="/archive/media/2014/example1_500x289.jpg" width="500" height="289" alt="Example1"></p>
<p>Not pretty. Makes my eyes hurt.</p>
<h2>Hello World</h2>
<p>To get started with some examples, I was recently a part of launching Aabenraa.dk (a Danish municipality). If you look through the &lt;head&gt; section in the source code for a page, you will find the following meta tags (sorry for the Danish):</p>
<pre class="language-markup"><code>&lt;meta property="og:title" content="Flytning, bolig og byggeri" /&gt;
&lt;meta property="og:site_name" content="aabenraa.dk" /&gt;
&lt;meta property="og:url" content="http://www.aabenraa.dk/borger/flytning,-bolig-og-byggeri/" /&gt;
&lt;meta property="og:type" content="website" /&gt;
&lt;meta property="og:description" content="Velkommen til Aabenraa Kommunes hjemmeside, hvor du kan få hjælp og svar på langt de fleste af dine spørgsmål, samt information om en række af de tilbud, som Aabenraa Kommune kan tilbyde." /&gt;
&lt;meta property="og:image" content="http://www.aabenraa.dk/img/5065aa/facebooklogo.jpg?635442032005618720" /&gt;</code></pre>
<p>In the example of Aabenraa.dk, the following information is specified in the Open Graph meta tags:</p>
<ul>
<li>The title of the page. Usually the same as what you put in the &lt;title&gt; tag.</li>
<li>The name of the site. Not a must.</li>
<li>The URL of the site. Sorta like when specifying a canonical link.</li>
<li>The type of the page. Should be "website" in most cases or simply omitted.</li>
<li>The description of the page. A page may have a teaser text, and if the teaser text is present, that will be the description. If not present, a standard text describing the site will be added instead.</li>
<li>One or more images. By default the logo of the municipality will be shown. A standard page may also have a slider, and images from the slider will be added as well (preceding the logo).</li>
</ul>
<p>Back to the above HTML example, it can be hard to remember the exact syntax between each time one have to setup the tags for a site. I usually end having to look of the syntax in the Open Graph specification.</p>
<p>So rather than writing the HTML manually, I have therefore created a package that takes a more object-oriented approach, and will generate the necessary HTML for you.</p>
<h2>Now to the C#</h2>
<p>The package takes its starting point in the <em>OpenGraphProperties</em> class, and in this article, that's all you need. In your MVC view, you could do something like (which covers the most basic properties):</p>
<pre class="language-javascript"><code>// Get the site name and page title
string siteName = Model.Content.AncestorOrSelf(1).Name;
string title = Model.Content.Name + " - " + siteName;

// Set basic Open Graph properties
OpenGraphProperties og = new OpenGraphProperties {
    SiteName = siteName,
    Type = "website",
    Url = Model.Content.UrlWithDomain(),
    Title = title
};</code></pre>
<p>Now to generate the HTML, simply do as below:</p>
<pre class="language-markup"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;title&gt;@title&lt;/title&gt;
        @og
    &lt;/head&gt;
    &lt;body&gt;
        
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>This would generate the following HTML:</p>
<pre class="language-markup"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;title&gt;Some page - Awesome Site&lt;/title&gt;
        &lt;meta property="og:title" content="Some page - Awesome Site" /&gt;
&lt;meta property="og:site_name" content="Awesome Site" /&gt;
&lt;meta property="og:url" content="http://localhost:50957/some-page/" /&gt;
&lt;meta property="og:type" content="website" /&gt;

    &lt;/head&gt;
    &lt;body&gt;
        
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>Back to the example from Aabenraa.dk, setting the description (teaser text) would look like:</p>
<pre class="language-javascript"><code>// Set the description
if (Model.Content.HasValue("teaser")) {
    og.Description = Model.Content.GetPropertyValue&lt;string&gt;("teaser");
} else {
    og.Description = "Some general description about the site.";
}</code></pre>
<p>And the image(s) like the code below (considering that <em>slider</em> is a collection of images):</p>
<pre class="language-javascript"><code>foreach (var image in slider) {
    og.AddImage(image.Url);
}
og.AddImage(logoUrl);</code></pre>
<p>All together this would result in the following HTML:</p>
<pre class="language-markup"><code>&lt;meta property="og:title" content="Bopælsattest - aabenraa.dk" /&gt;
&lt;meta property="og:site_name" content="aabenraa.dk" /&gt;
&lt;meta property="og:url" content="http://www.aabenraa.dk/borger/flytning,-bolig-og-byggeri/flytning-og-bolig/bopaelsattest/" /&gt;
&lt;meta property="og:type" content="website" /&gt;
&lt;meta property="og:description" content="Hvis du har brug for at dokumentere, at du har været registreret på din nuværende eller tidligere adresser i en bestemt periode, kan du anmode om en bopælsattest." /&gt;
&lt;meta property="og:image" content="http://www.aabenraa.dk/media/534882/bopaelsattest.jpg" /&gt;
&lt;meta property="og:image" content="http://www.aabenraa.dk/img/5065aa/facebooklogo.jpg?635442032005618720" /&gt;</code></pre>
<p>Sharing that page on Facebook will now look like:</p>
<p><img src="/archive/media/2014/facebook_499x525.jpg" width="499" height="525" alt="Facebook"></p>
<p>If you head over to <a href="http://www.aabenraa.dk/borger/flytning,-bolig-og-byggeri/flytning-og-bolig/bopaelsattest/" target="_blank">the page in question</a>, you will see that the image is now automatically selected when sharing the page on Facebook, and the description is the same as the teaser text (again sorry for the Danish).</p>
<h2>Goodbye World</h2>
<p>I have released my code as a small package named <strong>Skybrud.OpenGraph</strong>. You can <a href="http://www.nuget.org/packages/Skybrud.OpenGraph" target="_blank" title="Download Skybrud.OpenGraph from NuGet">download it via NuGet</a> or <a href="https://github.com/abjerner/Skybrud.OpenGraph" target="_blank">have a look at the code on GitHub</a>. The package isn't specific to Umbraco, so you are free to use it in your custom ASP.NET projects as well.</p>
<p>If you have a look at the repository on GitHub, there will also be some <a href="https://github.com/abjerner/Skybrud.OpenGraph/tree/master/docs" target="_blank">documentation</a> for more advanced use cases.</p>
<p>For debugging purposes, you might also want to have a look at Facebook's <a href="https://developers.facebook.com/tools/debug/og/object/" target="_blank">Open Graph Object Debugger</a>. Enter the URL of the page you want to test, and Facebook will tell you how it sees the page.</p>
<p>If you have any questions, feel free to ask them in the the comments ;)</p>
    </div><footer><ul class="tags">
        <li><a rel="tag" href="/umbraco-cms/tags/frontend/" title="See all articles tagged with Frontend">Frontend</a></li>
        <li><a rel="tag" href="/umbraco-cms/tags/v6/" title="See all articles tagged with v6">v6</a></li>
        <li><a rel="tag" href="/umbraco-cms/tags/v7/" title="See all articles tagged with v7">v7</a></li>
      </ul></footer><section class="bios"><div class="bio">
        <div class="gravatar" title="Anders Bjerner"><img src="//gravatar.com/avatar/d1e8799951be61168d3929c56cdfa828.jpg?d=mm&amp;s=150" srcset="//gravatar.com/avatar/d1e8799951be61168d3929c56cdfa828.jpg?d=mm&amp;s=300 2x" width="150" height="150"></div>
        <h1>Anders Bjerner</h1>
        <p>Anders is on Twitter as <a href="//twitter.com/abjerner" title="Anders Bjerner on Twitter" rel="author">@abjerner</a></p>
      </div></section><section class="comments"><div id="disqus_thread"></div></section></main><nav class="dates-navbar"><a href="/umbraco-cms/2014/" class="home-link"><span class="scr-text">Home</span></a><ol>
      <li><a title="The Umbraco Codebase: A Traveller's Guide" href="/umbraco-cms/2014/traveller-guide/"><span class="scr-text">The Umbraco Codebase: A Traveller's Guide</span></a></li>
      <li><a title="Debugging AngularJS" href="/umbraco-cms/2014/debugging-angularjs/"><span class="scr-text">Debugging AngularJS</span></a></li>
      <li><a title="Getting data in and out of complex Archetype data types" href="/umbraco-cms/2014/working-with-complex-archetype-datatypes/"><span class="scr-text">Getting data in and out of complex Archetype data types</span></a></li>
      <li><a title="Your first pull request" href="/umbraco-cms/2014/your-first-pull-request/"><span class="scr-text">Your first pull request</span></a></li>
      <li><a title="Dealing With Members Using The MemberService &amp; MembershipHelper" href="/umbraco-cms/2014/dealing-with-members/"><span class="scr-text">Dealing With Members Using The MemberService &amp; MembershipHelper</span></a></li>
      <li class="selected"><a title="The Double Album" href="/umbraco-cms/2014/the-double-album/"><span class="scr-text">The Double Album</span></a></li>
      <li><a title="Managing Members in Umbraco" href="/umbraco-cms/2014/managing-members/"><span class="scr-text">Managing Members in Umbraco</span></a></li>
      <li><a title="Making an Angular-powered frontend with Umbraco" href="/umbraco-cms/2014/angular-powered-frontend/"><span class="scr-text">Making an Angular-powered frontend with Umbraco</span></a></li>
      <li><a title="Architectural thoughts when using Umbraco in Multi-platform solutions" href="/umbraco-cms/2014/architectural-thoughts/"><span class="scr-text">Architectural thoughts when using Umbraco in Multi-platform solutions</span></a></li>
      <li><a title="How to take full advantage of macros within the Umbraco 7.2 grid" href="/umbraco-cms/2014/grid-macros/"><span class="scr-text">How to take full advantage of macros within the Umbraco 7.2 grid</span></a></li>
      <li><a title="Newbie's Guide to Setting Up an Umbraco Website" href="/umbraco-cms/2014/how-to-set-up-an-umbraco-site/"><span class="scr-text">Newbie's Guide to Setting Up an Umbraco Website</span></a></li>
      <li><a title="Upgrading Umbraco using Git" href="/umbraco-cms/2014/upgrading-umbraco-using-git/"><span class="scr-text">Upgrading Umbraco using Git</span></a></li>
      <li><a title="Architecture based on IoC/DI for Umbraco packages" href="/umbraco-cms/2014/iocdi-architecture/"><span class="scr-text">Architecture based on IoC/DI for Umbraco packages</span></a></li>
      <li><a title="Using Angular in the backoffice - Some useful tips" href="/umbraco-cms/2014/umbraco-angular-tips/"><span class="scr-text">Using Angular in the backoffice - Some useful tips</span></a></li>
      <li><a title="Build a simple contextual language switcher" href="/umbraco-cms/2014/razor-language-switcher/"><span class="scr-text">Build a simple contextual language switcher</span></a></li>
      <li><a title="All Your Images Are Belong to Umbraco" href="/umbraco-cms/2014/all-your-images-are-belong-to-umbraco/"><span class="scr-text">All Your Images Are Belong to Umbraco</span></a></li>
      <li><a title="Modify Umbraco URLs with the UrlProvider and ContentFinder" href="/umbraco-cms/2014/urlprovider-and-contentfinder/"><span class="scr-text">Modify Umbraco URLs with the UrlProvider and ContentFinder</span></a></li>
      <li><a title="Umbraco Packaging with AppVeyor CI" href="/umbraco-cms/2014/packaging-with-appveyor/"><span class="scr-text">Umbraco Packaging with AppVeyor CI</span></a></li>
      <li><a title="Have beer - looking for workers" href="/umbraco-cms/2014/umbraco-tribe/"><span class="scr-text">Have beer - looking for workers</span></a></li>
      <li><a title="Extending Umbraco 7 backend" href="/umbraco-cms/2014/extending-umbraco-7-backend/"><span class="scr-text">Extending Umbraco 7 backend</span></a></li>
      <li><a title="Redirect rules" href="/umbraco-cms/2014/redirect-rules/"><span class="scr-text">Redirect rules</span></a></li>
      <li><a title="Faceted Search with Bobo" href="/umbraco-cms/2014/search-with-bobo/"><span class="scr-text">Faceted Search with Bobo</span></a></li>
      <li><a title="The Merchello Contribution" href="/umbraco-cms/2014/the-merchello-contribution/"><span class="scr-text">The Merchello Contribution</span></a></li>
      <li><a title="The power of (Christmas) card modes" href="/umbraco-cms/2014/card-modes/"><span class="scr-text">The power of (Christmas) card modes</span></a></li>
      <li><a title="The EPUB is here" href="/umbraco-cms/2014/epub/"><span class="scr-text">The EPUB is here</span></a></li>
    </ol></nav></section>


	<script type="module" src="/assets/ipuzzler.js"></script>
	<script defer src="/assets/libs.min.js"></script>
	<script defer src="/assets/app.js"></script>
	
</body>
</html>
