<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">


	<title>Post build events for package developers</title>
<meta name="description" content="How we can use Visual studio build events to automatically copy Umbraco package files to the correct test site after build.">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="/assets/24days-archive.css">
	<link rel="apple-touch-icon" href="/assets/24days-touch-icon.png">
		
	
	
</head>
<body>
	



<section class="page"><main class="article"><header><h1 class="header">Post build events for Package devs</h1>
      <p class="byline"> by Richard Soeteman, <span class="pubdate">posted on <time datetime="2012-12-07">Dec 7, 2012</time></span></p></header><div class="notification warning">
      <h2>Heads Up!</h2>
      <p>
					This article is several years old now, and much has happened since then,
					so please keep that in mind while reading it.
				</p>
    </div>
    <div class="content-column">
      <p class="teaser">When building Umbraco packages I always use post build events in Visual studio to "deploy" the bits to my Umbraco development environments. Since most of my packages support multiple versions of Umbraco I need to test the package on every supported  version of Umbraco. For every Umbraco version I have a complete website available in my Umbracosites folder.</p>
<figure>
  <a href="/archive/media/2012/folders.png">
    <img src="/archive/media/2012/folders.png" width="833" alt="Folders">
  </a>
</figure>
<p class="intro">And I'm using post build events to copy the package files to the Umbraco websites.</p>
<pre class="language-markup"><code>XCOPY "$(ProjectDir)bin\CMSImport*.dll" "F:\umbracosites\umbracoV47\bin\" /y
XCOPY "$(ProjectDir)bin\umbraco.licen*.dll" "F:\umbracosites\umbracoV47\bin\" /y
XCOPY "$(ProjectDir)controls\*.ascx" "F:\umbracosites\umbracoV47\umbraco\plugins\CMSImport\usercontrols\" /y
XCOPY "$(ProjectDir)pages\*.aspx" "F:\umbracosites\UmbracoV47\umbraco\plugins\CMSImport\pages\" /y

XCOPY "$(ProjectDir)bin\CMSImport*.dll" "F:\umbracosites\umbracoV48\bin\" /y
XCOPY "$(ProjectDir)bin\umbraco.licen*.dll" "F:\umbracosites\umbracoV48\bin\" /y
XCOPY "$(ProjectDir)controls\*.ascx" "F:\umbracosites\umbracoV48\umbraco\plugins\CMSImport\usercontrols\" /y
XCOPY "$(ProjectDir)pages\*.aspx" "F:\umbracosites\UmbracoV48\umbraco\plugins\CMSImport\pages\" /y

XCOPY "$(ProjectDir)bin\CMSImport*.dll" "F:\umbracosites\umbracoV49\bin\" /y
XCOPY "$(ProjectDir)bin\umbraco.licen*.dll" "F:\umbracosites\umbracoV49\bin\" /y
XCOPY "$(ProjectDir)controls\*.ascx" "F:\umbracosites\umbracoV49\umbraco\plugins\CMSImport\usercontrols\" /y
XCOPY "$(ProjectDir)pages\*.aspx" "F:\umbracosites\UmbracoV49\umbraco\plugins\CMSImport\pages\" /y</code></pre>
      <p class="snippet-caption">Post build events</p>
<p>Separating the package bits and websites allows me to completely destroy an Umbraco environment without having to worry about it, reinstall, or restore the environment when it is destroyed and deploy the bits from Visual studio and all is working again.</p>
<h3>Improving this build process</h3>
<p>Until recently I was very happy with this approach. A new version of Umbraco was released every few months, so every few months I needed to update the post build event. But then a new version of Umbraco was released every few weeks and I  needed to update the post build event more often and when a new item is added to the build script I needed to copy this for every environment in the script. That got me thinking about a new way to do post build copies.</p>
<p><br>If you are a bit familiar with Post build event scripts you know that you can use variables in these scripts. One of these variables is the <strong>$(ConfigurationName)</strong> variable, which holds the value of the current Build configuration. By default it comes with two configurations <strong>Debug</strong> and <strong>Release</strong>. But when you go to Build, configuration manager and hit the Active solution configuration you see you can create your own.</p>
<figure>
  <a href="/archive/media/2012/configurationmanager.png">
    <img src="/archive/media/2012/configurationmanager.png" width="752" alt="Configurationmanager">
  </a>
</figure>
<p>When you build your project the $(ConfigurationName) will be replaced with the actual value of the configuration. So by creating a UmbracoV410 configuration  I can update my post build script to the following and it will <strong>replace $(ConfigurationName) with UmbracoV410 </strong>and files will be copied to <strong>f:\umbracosites\</strong> when using the UmbracoV410 build configuration. By creating configurations for every Umbraco version the package supports the post build event will work for every Umbraco environment.</p>
<pre class="language-markup"><code>XCOPY "$(ProjectDir)bin\CMSImport*.dll" "F:\umbracosites\$(ConfigurationName)\bin\" /y
XCOPY "$(ProjectDir)bin\umbraco.licen*.dll" "F:\umbracosites\$(ConfigurationName)\bin\" /y
XCOPY "$(ProjectDir)controls\*.ascx" "F:\umbracosites\$(ConfigurationName)\umbraco\plugins\CMSImport\usercontrols\" /y 
XCOPY "$(ProjectDir)pages\*.aspx" "F:\umbracosites\$(ConfigurationName)\umbraco\plugins\CMSImport\pages\" /y </code></pre>
      <p class="snippet-caption">Optimized Post build events</p>
<p><br>Hope this helps you make it easier to test packages when developing for multiple versions of Umbraco!<br><br><br>Merry Christmas!<br><br></p>
    </div><footer><ul class="tags">
        <li><a rel="tag" href="https://24days.in/umbraco-cms/tags/visual-studio/" title="See all articles tagged with Visual Studio">Visual Studio</a></li>
        <li><a rel="tag" href="https://24days.in/umbraco-cms/tags/v4/" title="See all articles tagged with v4">v4</a></li>
        <li><a rel="tag" href="https://24days.in/umbraco-cms/tags/v6/" title="See all articles tagged with v6">v6</a></li>
        <li><a rel="tag" href="https://24days.in/umbraco-cms/tags/v7/" title="See all articles tagged with v7">v7</a></li>
      </ul></footer><section class="bios"><div class="bio">
        <div class="gravatar" title="Richard Soeteman"><img src="//gravatar.com/avatar/269eafaf2cbe7ca7efe5936ac25e832d.jpg?d=mm&amp;s=150" srcset="//gravatar.com/avatar/269eafaf2cbe7ca7efe5936ac25e832d.jpg?d=mm&amp;s=300 2x" width="150" height="150"></div>
        <h1>Richard Soeteman</h1>
        <p>Richard is on Twitter as <a href="//twitter.com/rsoeteman" title="Richard Soeteman on Twitter" rel="author">@rsoeteman</a></p>
      </div></section><section class="comments"><div id="disqus_thread"></div></section></main><nav class="dates-navbar"><a href="/umbraco-cms/2012/" class="home-link"><span class="scr-text">Home</span></a><ol>
      <li><a title="The Tale of the 3 CMSs" href="/umbraco-cms/2012/the-tale/"><span class="scr-text">The Tale of the 3 CMSs</span></a></li>
      <li><a title="Using DocTypeMixins" href="/umbraco-cms/2012/doctypemixins/"><span class="scr-text">Using DocTypeMixins</span></a></li>
      <li><a title="1-1 Multilingual Websites in Umbraco" href="/umbraco-cms/2012/multilingual-1-1/"><span class="scr-text">1-1 Multilingual Websites in Umbraco</span></a></li>
      <li><a title="How to view source with pride" href="/umbraco-cms/2012/how-to-view-source-with-pride/"><span class="scr-text">How to view source with pride</span></a></li>
      <li><a title="Introducing The umbraco:image Control" href="/umbraco-cms/2012/introducing-the-umbraco-image-control/"><span class="scr-text">Introducing The umbraco:image Control</span></a></li>
      <li><a title="Ajax Paging Using AltTemplates" href="/umbraco-cms/2012/ajax-paging-using-alttemplates/"><span class="scr-text">Ajax Paging Using AltTemplates</span></a></li>
      <li class="selected"><a title="Post build events for Package devs" href="/umbraco-cms/2012/post-build-events-for-package-devs/"><span class="scr-text">Post build events for Package devs</span></a></li>
      <li><a title="How to extend the back-office..." href="/umbraco-cms/2012/extending-the-back-office/"><span class="scr-text">How to extend the back-office...</span></a></li>
      <li><a title="Community engagement" href="/umbraco-cms/2012/community-engagement/"><span class="scr-text">Community engagement</span></a></li>
      <li><a title="DAMP Gallery" href="/umbraco-cms/2012/damp-gallery/"><span class="scr-text">DAMP Gallery</span></a></li>
      <li><a title="Give me JSON" href="/umbraco-cms/2012/give-me-json/"><span class="scr-text">Give me JSON</span></a></li>
      <li><a title="Optimising Umbraco for speed" href="/umbraco-cms/2012/optimise-for-speed/"><span class="scr-text">Optimising Umbraco for speed</span></a></li>
      <li><a title="Remember the Editors!" href="/umbraco-cms/2012/remember-the-editors/"><span class="scr-text">Remember the Editors!</span></a></li>
      <li><a title="On Being a Superhero" href="/umbraco-cms/2012/superhero/"><span class="scr-text">On Being a Superhero</span></a></li>
      <li><a title="Bulk-Assigning Media Items" href="/umbraco-cms/2012/bulk-assigning-media/"><span class="scr-text">Bulk-Assigning Media Items</span></a></li>
      <li><a title="The importance of great images ... and how you achieve them" href="/umbraco-cms/2012/great-images/"><span class="scr-text">The importance of great images ... and how you achieve them</span></a></li>
      <li><a title="Media Query opt-out with Umbraco" href="/umbraco-cms/2012/media-query-opt-out/"><span class="scr-text">Media Query opt-out with Umbraco</span></a></li>
      <li><a title="Who Picked This ?" href="/umbraco-cms/2012/who-picked-this/"><span class="scr-text">Who Picked This ?</span></a></li>
      <li><a title="Razor and Faceted Search In Umbraco" href="/umbraco-cms/2012/razor-faceted-search/"><span class="scr-text">Razor and Faceted Search In Umbraco</span></a></li>
      <li><a title="Creating a Login form with Umbraco MVC SurfaceController" href="/umbraco-cms/2012/creating-a-login-form-with-umbraco-mvc-surfacecontroller/"><span class="scr-text">Creating a Login form with Umbraco MVC SurfaceController</span></a></li>
      <li><a title="Favorite Pages for Members" href="/umbraco-cms/2012/member-favorites/"><span class="scr-text">Favorite Pages for Members</span></a></li>
      <li><a title="AutoIcons, Conventions in Umbraco" href="/umbraco-cms/2012/autoicons-conventions-in-umbraco/"><span class="scr-text">AutoIcons, Conventions in Umbraco</span></a></li>
      <li><a title="Quick Tips for Improving your Callouts" href="/umbraco-cms/2012/improving-callouts/"><span class="scr-text">Quick Tips for Improving your Callouts</span></a></li>
      <li><a title="Wrapping Up: Building this Site" href="/umbraco-cms/2012/wrapping-up/"><span class="scr-text">Wrapping Up: Building this Site</span></a></li>
      <li><a title="One more thing..." href="/umbraco-cms/2012/one-more-thing/"><span class="scr-text">One more thing...</span></a></li>
    </ol></nav></section>


	<script type="module" src="/assets/ipuzzler.js"></script>
	<script defer src="/assets/libs.min.js"></script>
	<script defer src="/assets/app.js"></script>
	
</body>
</html>
